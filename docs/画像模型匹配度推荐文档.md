# 画像与模型匹配度推荐文档

## 文档说明

本文档用于指导模型外链到画像对应可视化界面的配置，基于业务语义和数据结构分析，提供每个画像与ontology模型中各对象类型的匹配度评估。

**匹配度等级说明：**
- ⭐⭐⭐⭐⭐ (95-100%): 高度匹配，强烈推荐外链
- ⭐⭐⭐⭐ (80-94%): 良好匹配，推荐外链
- ⭐⭐⭐ (60-79%): 中等匹配，可考虑外链
- ⭐⭐ (40-59%): 低匹配度，不推荐外链
- ⭐ (0-39%): 不匹配，不建议外链

---

## 1. 差异收费分析驾驶舱

### 画像描述
专注于分析收费差异、减免金额、收费异常等业务场景，用于识别和处理收费不一致问题。

### 推荐模型匹配度

#### ⭐⭐⭐⭐⭐ 高度匹配模型

1. **ExitTransaction (出口车道流水)**
   - **匹配度**: 98%
   - **推荐理由**: 
     - 包含完整的收费金额字段（fee, pay_fee, discount_fee, trans_fee等）
     - 支持差异分析所需的交易类型、支付方式等维度
     - 包含特情状态字段（special_type, sp_info）用于异常识别
     - 字段：`fee`(总交易金额), `pay_fee`(应收金额), `discount_fee`(优惠金额), `trans_fee`(卡面扣费金额), `unpay_fee`(欠通行费金额)
   - **外链建议**: 强烈推荐，可作为主要数据源

2. **ClearResult (清分结果)**
   - **匹配度**: 95%
   - **推荐理由**:
     - 包含实收、优惠、应收清分金额字段，直接支持差异分析
     - 关联收费路段和业主信息，支持多维度分析
     - 字段：`amount`(实收清分金额), `discount_amount`(优惠清分金额), `charge_amount`(应收清分金额)
   - **外链建议**: 强烈推荐，用于清分层面的差异分析

#### ⭐⭐⭐⭐ 良好匹配模型

3. **GantryTransaction (ETC门架计费流水)**
   - **匹配度**: 85%
   - **推荐理由**:
     - 门架计费流水可能产生收费差异
     - 包含计费金额、优惠金额等字段
     - 字段：`fee`(交易金额), `pay_fee`(应收金额), `discount_fee`(优惠金额)
   - **外链建议**: 推荐，用于门架计费差异分析

4. **SplitDetail (拆分明细)**
   - **匹配度**: 82%
   - **推荐理由**:
     - 拆分过程可能产生差异
     - 包含收费单元费用、支付费用、优惠费用
     - 字段：`toll_interval_fee`, `toll_interval_pay_fee`, `toll_interval_discount_fee`
   - **外链建议**: 推荐，用于拆分环节的差异追溯

#### ⭐⭐⭐ 中等匹配模型

5. **Path (车辆通行路径)**
   - **匹配度**: 70%
   - **推荐理由**: 路径信息可用于辅助分析收费差异的原因
   - **外链建议**: 可考虑，用于路径维度的差异分析

6. **EntryTransaction (入口车道流水)**
   - **匹配度**: 65%
   - **推荐理由**: 入口信息作为辅助维度，间接关联差异分析
   - **外链建议**: 可考虑，用于入口信息关联

---

## 2. 路网运行驾驶舱

### 画像描述
展示路网整体运行状况，包括车流量、通行量、路网状态等实时运营指标。

### 推荐模型匹配度

#### ⭐⭐⭐⭐⭐ 高度匹配模型

1. **Path (车辆通行路径)**
   - **匹配度**: 98%
   - **推荐理由**:
     - 核心业务实体，包含通行路径的完整信息
     - 支持统计车流量、通行量等指标
     - 包含入口/出口时间、站点、车道等维度
     - 字段：`en_time`(入口时间), `ex_time`(出口时间), `en_toll_station_id`, `ex_toll_station_id`
   - **外链建议**: 强烈推荐，作为主要数据源

2. **ExitTransaction (出口车道流水)**
   - **匹配度**: 95%
   - **推荐理由**:
     - 出口交易数据反映路网通行情况
     - 支持按时间、站点、车道等维度统计
     - 字段：`ex_time`(出口时间), `ex_toll_station_id`(出口站号), `ex_toll_lane_id`(出口车道号)
   - **外链建议**: 强烈推荐，用于出口通行统计

#### ⭐⭐⭐⭐ 良好匹配模型

3. **EntryTransaction (入口车道流水)**
   - **匹配度**: 90%
   - **推荐理由**:
     - 入口交易数据反映路网入口通行情况
     - 支持入口维度统计
     - 字段：`en_time`(入口时间), `en_toll_lane_id`(入口车道号)
   - **外链建议**: 推荐，用于入口通行统计

4. **GantryTransaction (ETC门架计费流水)**
   - **匹配度**: 88%
   - **推荐理由**:
     - 门架交易反映路网中段通行情况
     - 支持门架维度的流量统计
     - 字段：`trans_time`(计费交易时间), `gantry_id`(门架编号)
   - **外链建议**: 推荐，用于门架通行统计

5. **TollGantry (收费门架)**
   - **匹配度**: 85%
   - **推荐理由**:
     - 门架基础信息，支持路网基础设施展示
     - 包含门架位置、状态等信息
     - 字段：`name`(名称), `lat`(纬度), `lng`(经度), `status`(状态)
   - **外链建议**: 推荐，用于门架基础设施展示

#### ⭐⭐⭐ 中等匹配模型

6. **TollSection (收费路段)**
   - **匹配度**: 75%
   - **推荐理由**: 路段信息支持路网地理维度分析
   - **外链建议**: 可考虑，用于路段维度统计

7. **PathDetail (车辆通行路径明细)**
   - **匹配度**: 70%
   - **推荐理由**: 路径明细提供更细粒度的通行信息
   - **外链建议**: 可考虑，用于详细路径分析

---

## 3. 收费管理驾驶舱

### 画像描述
管理收费业务的核心指标，包括收费金额、收费统计、收费方式分布等管理类数据。

### 推荐模型匹配度

#### ⭐⭐⭐⭐⭐ 高度匹配模型

1. **ExitTransaction (出口车道流水)**
   - **匹配度**: 98%
   - **推荐理由**:
     - 核心收费交易数据，包含所有收费相关字段
     - 支持按支付方式、交易类型等维度统计
     - 字段：`fee`(总交易金额), `pay_fee`(应收金额), `pay_type`(支付类型), `trans_pay_type`(交易支付方式), `pay_card_type`(支付卡类型)
   - **外链建议**: 强烈推荐，作为主要数据源

2. **ClearReport (清分报表)**
   - **匹配度**: 96%
   - **推荐理由**:
     - 清分报表是收费管理的核心汇总数据
     - 支持按支付方式、机构等维度统计
     - 包含多种支付方式的拆分金额和合计金额
     - 字段：`cash_toll_money`(现金合计金额), `etc_toll_money`(ETC合计金额), `alipay_toll_money`(支付宝合计金额), `wepay_toll_money`(微信合计金额)
   - **外链建议**: 强烈推荐，用于收费汇总统计

#### ⭐⭐⭐⭐ 良好匹配模型

3. **ClearResult (清分结果)**
   - **匹配度**: 90%
   - **推荐理由**:
     - 清分结果提供明细级别的收费数据
     - 支持收费管理和对账
     - 字段：`amount`(实收清分金额), `charge_amount`(应收清分金额), `pay_card_type`(支付卡类型)
   - **外链建议**: 推荐，用于清分明细管理

4. **GantryTransaction (ETC门架计费流水)**
   - **匹配度**: 85%
   - **推荐理由**:
     - 门架计费是收费的重要组成部分
     - 支持门架维度的收费统计
     - 字段：`fee`(交易金额), `pay_fee`(应收金额)
   - **外链建议**: 推荐，用于门架收费管理

5. **SplitDetail (拆分明细)**
   - **匹配度**: 82%
   - **推荐理由**:
     - 拆分是收费管理的重要环节
     - 支持拆分维度的收费分析
     - 字段：`toll_interval_fee`, `toll_interval_pay_fee`
   - **外链建议**: 推荐，用于拆分管理

#### ⭐⭐⭐ 中等匹配模型

6. **EntryTransaction (入口车道流水)**
   - **匹配度**: 70%
   - **推荐理由**: 入口交易包含部分收费相关信息
   - **外链建议**: 可考虑，用于入口收费关联

7. **TollSection (收费路段)**
   - **匹配度**: 65%
   - **推荐理由**: 路段信息支持收费管理的地理维度
   - **外链建议**: 可考虑，用于路段维度管理

---

## 4. 首页大屏

### 画像描述
展示系统整体概览，包括关键指标汇总、实时数据、系统状态等综合信息。

### 推荐模型匹配度

#### ⭐⭐⭐⭐⭐ 高度匹配模型

1. **Path (车辆通行路径)**
   - **匹配度**: 95%
   - **推荐理由**:
     - 核心业务实体，适合展示整体通行情况
     - 支持汇总统计关键指标
     - 字段：`en_time`, `ex_time`, `pass_id`
   - **外链建议**: 强烈推荐，用于整体通行统计

2. **ExitTransaction (出口车道流水)**
   - **匹配度**: 93%
   - **推荐理由**:
     - 出口交易数据适合展示实时收费情况
     - 支持关键指标汇总
     - 字段：`ex_time`, `fee`, `pay_fee`
   - **外链建议**: 强烈推荐，用于收费指标展示

#### ⭐⭐⭐⭐ 良好匹配模型

3. **ClearReport (清分报表)**
   - **匹配度**: 88%
   - **推荐理由**:
     - 清分报表适合展示汇总数据
     - 支持多维度指标展示
     - 字段：各类支付方式的合计金额
   - **外链建议**: 推荐，用于汇总指标展示

4. **EntryTransaction (入口车道流水)**
   - **匹配度**: 85%
   - **推荐理由**:
     - 入口数据支持实时通行统计
     - 字段：`en_time`, `pass_id`
   - **外链建议**: 推荐，用于入口统计

5. **GantryTransaction (ETC门架计费流水)**
   - **匹配度**: 82%
   - **推荐理由**:
     - 门架数据支持路网运行状态展示
     - 字段：`trans_time`, `gantry_id`
   - **外链建议**: 推荐，用于门架状态展示

#### ⭐⭐⭐ 中等匹配模型

6. **TollGantry (收费门架)**
   - **匹配度**: 75%
   - **推荐理由**: 门架基础设施信息支持系统状态展示
   - **外链建议**: 可考虑，用于基础设施展示

7. **TollSection (收费路段)**
   - **匹配度**: 70%
   - **推荐理由**: 路段信息支持地理维度展示
   - **外链建议**: 可考虑，用于路段概览

---

## 5. 运营指标分析看板

### 画像描述
分析运营相关的各项指标，包括ETC使用率、识别准确率、数据上传及时率等运营质量指标。

### 推荐模型匹配度

#### ⭐⭐⭐⭐⭐ 高度匹配模型

1. **ExitTransaction (出口车道流水)**
   - **匹配度**: 96%
   - **推荐理由**:
     - 包含支付类型、支付方式等字段，支持ETC使用率统计
     - 包含识别车牌号字段，支持识别准确率分析
     - 包含接收时间等字段，支持数据及时性分析
     - 字段：`pay_type`(支付类型), `pay_card_type`(支付卡类型), `identify_vlp`(识别车牌号), `ex_vlp`(出口实际车牌号), `receive_time`(接收时间)
   - **外链建议**: 强烈推荐，作为主要数据源

2. **EntryTransaction (入口车道流水)**
   - **匹配度**: 94%
   - **推荐理由**:
     - 包含通行介质类型，支持ETC使用率统计
     - 包含识别车牌号字段，支持识别准确率分析
     - 包含接收时间等字段，支持数据及时性分析
     - 字段：`media_type`(通行介质类型), `identify_vlp`(识别车牌号), `vlp`(车牌号), `receive_time`(接收时间)
   - **外链建议**: 强烈推荐，用于入口运营指标

#### ⭐⭐⭐⭐ 良好匹配模型

3. **GantryTransaction (ETC门架计费流水)**
   - **匹配度**: 88%
   - **推荐理由**:
     - 门架交易数据支持门架维度的运营指标分析
     - 包含通行介质类型、识别车型等字段
     - 字段：`media_type`(通行介质类型), `vehicle_type`(计费车型), `identify_vehicle_type`(识别的车型), `receive_time`(接收时间)
   - **外链建议**: 推荐，用于门架运营指标

4. **Path (车辆通行路径)**
   - **匹配度**: 85%
   - **推荐理由**:
     - 路径数据支持整体运营指标分析
     - 包含支付类型等字段
     - 字段：`pay_type`(支付类型), `pay_card_type`(支付卡类型)
   - **外链建议**: 推荐，用于路径维度指标

#### ⭐⭐⭐ 中等匹配模型

5. **PathDetail (车辆通行路径明细)**
   - **匹配度**: 75%
   - **推荐理由**: 路径明细提供更细粒度的运营数据
   - **外链建议**: 可考虑，用于详细指标分析

6. **TollGantry (收费门架)**
   - **匹配度**: 70%
   - **推荐理由**: 门架状态信息支持基础设施运营指标
   - **外链建议**: 可考虑，用于门架状态指标

---

## 模型外链配置建议

### 通用配置原则

1. **主数据源优先**: 每个画像应优先外链匹配度⭐⭐⭐⭐⭐的模型作为主数据源
2. **辅助数据源补充**: 可外链匹配度⭐⭐⭐⭐的模型作为辅助数据源，提供多维度分析
3. **关联关系利用**: 利用link_types中定义的关系，实现模型间的关联查询
4. **字段映射**: 根据画像需求，选择模型中的关键字段进行映射

### 外链配置示例

#### 示例1: 差异收费分析驾驶舱配置

```yaml
推荐外链配置:
  主数据源:
    - ExitTransaction (出口车道流水)
      关键字段: [fee, pay_fee, discount_fee, trans_fee, unpay_fee, special_type]
      关联关系: exit_to_path -> Path
      
  辅助数据源:
    - ClearResult (清分结果)
      关键字段: [amount, discount_amount, charge_amount]
      关联关系: path_to_clear_result
      
    - GantryTransaction (ETC门架计费流水)
      关键字段: [fee, pay_fee, discount_fee]
```

#### 示例2: 路网运行驾驶舱配置

```yaml
推荐外链配置:
  主数据源:
    - Path (车辆通行路径)
      关键字段: [en_time, ex_time, en_toll_station_id, ex_toll_station_id, pass_id]
      
  辅助数据源:
    - ExitTransaction (出口车道流水)
      关键字段: [ex_time, ex_toll_station_id, ex_toll_lane_id]
      关联关系: exit_to_path -> Path
      
    - EntryTransaction (入口车道流水)
      关键字段: [en_time, en_toll_lane_id]
      关联关系: entry_to_path -> Path
```

### 注意事项

1. **性能考虑**: 外链多个模型时，注意查询性能，建议使用聚合查询
2. **数据一致性**: 确保外链的模型数据时间范围一致
3. **权限控制**: 根据业务需求配置模型访问权限
4. **实时性要求**: 根据画像的实时性要求，选择合适的数据刷新策略

---

## 附录：模型字段快速参考

### ExitTransaction 关键字段
- `fee`: 总交易金额
- `pay_fee`: 应收金额
- `discount_fee`: 优惠金额
- `trans_fee`: 卡面扣费金额
- `unpay_fee`: 欠通行费金额
- `pay_type`: 支付类型
- `pay_card_type`: 支付卡类型
- `ex_time`: 出口时间
- `ex_toll_station_id`: 出口站号
- `ex_toll_lane_id`: 出口车道号
- `identify_vlp`: 识别车牌号
- `ex_vlp`: 出口实际车牌号
- `special_type`: 部特情类型

### Path 关键字段
- `pass_id`: 通行标识
- `plate_num`: 车牌号码
- `en_time`: 入口时间
- `ex_time`: 出口时间
- `en_toll_station_id`: 入口收费站编号
- `ex_toll_station_id`: 出口收费站编号
- `pay_type`: 支付类型

### ClearReport 关键字段
- `cash_toll_money`: 现金合计金额
- `etc_toll_money`: ETC合计金额
- `alipay_toll_money`: 支付宝合计金额
- `wepay_toll_money`: 微信合计金额
- `clear_date`: 清分日期

---

## 更新记录

- 2026-02-04: 初始版本，基于schema.yaml和画像业务语义分析生成

