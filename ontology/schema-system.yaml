version: "1.0"
namespace: "com.tollcenter.ontology.system"

object_types:
  - name: workspace
    display_name: 工作空间
    description: "用于对对象类型和关系类型进行分组的工作空间"
    properties:
      - name: name
        display_name: 工作空间标识
        data_type: string
        required: true
        description: "工作空间唯一标识（英文）"

      - name: display_name
        display_name: 工作空间名称
        data_type: string
        required: false
        description: "工作空间显示名称（中文）"

      - name: description
        display_name: 描述
        data_type: string
        required: false
        description: "工作空间用途说明"

      - name: object_types
        display_name: 对象类型列表
        data_type: json
        required: false
        description: "属于该工作空间的对象类型名称数组"

      - name: link_types
        display_name: 关系类型列表
        data_type: json
        required: false
        description: "属于该工作空间的关系类型名称数组"

  - name: database
    display_name: 数据源
    description: "数据库数据源"
    properties:
      - name: name
        display_name: 数据源名称
        data_type: string
        required: true
        description: "数据源唯一名称"
      
      - name: type
        display_name: 数据库类型
        data_type: string
        required: true
        description: "数据库类型（mysql、postgresql等）"
      
      - name: host
        display_name: 主机地址
        data_type: string
        required: true
        description: "数据库主机地址"
      
      - name: port
        display_name: 端口
        data_type: int
        required: true
        description: "数据库端口"
      
      - name: database_name
        display_name: 数据库名
        data_type: string
        required: true
        description: "数据库名称"
      
      - name: username
        display_name: 用户名
        data_type: string
        required: true
        description: "数据库用户名"
      
      - name: password
        display_name: 密码
        data_type: string
        required: false
        description: "数据库密码（加密存储）"

  - name: table
    display_name: 数据表
    description: "数据库表"
    properties:
      - name: name
        display_name: 表名
        data_type: string
        required: true
        description: "数据库表名"
      
      - name: database_id
        display_name: 数据源ID
        data_type: string
        required: true
        description: "所属数据源的ID"
      
      - name: schema_name
        display_name: Schema名称
        data_type: string
        required: false
        description: "数据库Schema名称"
      
      - name: description
        display_name: 描述
        data_type: string
        required: false
        description: "表描述"

  - name: column
    display_name: 数据列
    description: "数据库表的列"
    properties:
      - name: name
        display_name: 列名
        data_type: string
        required: true
        description: "数据库列名"
      
      - name: table_id
        display_name: 表ID
        data_type: string
        required: true
        description: "所属表的ID"

      - name: table_name
        display_name: 表名
        data_type: string
        required: true
        description: "所属表的表名"
      
      - name: data_type
        display_name: 数据类型
        data_type: string
        required: true
        description: "数据库列的数据类型"
      
      - name: nullable
        display_name: 是否可空
        data_type: bool
        required: false
        description: "列是否允许为空"
      
      - name: is_primary_key
        display_name: 是否主键
        data_type: bool
        required: false
        description: "是否为主键"
      
      - name: description
        display_name: 描述
        data_type: string
        required: false
        description: "列描述"

  - name: mapping
    display_name: 映射关系
    description: "数据库表列与对象属性的映射关系"
    properties:
      - name: object_type
        display_name: 对象类型
        data_type: string
        required: true
        description: "目标对象类型名称"
      
      - name: table_id
        display_name: 表ID
        data_type: string
        required: true
        description: "源数据表ID"
      
      - name: table_name
        display_name: 表名
        data_type: string
        required: true
        description: "所属表的表名"
      
      - name: column_property_mappings
        display_name: 列属性映射
        data_type: json
        required: true
        description: "JSON格式的列到属性的映射关系，格式：{\"column_name\": \"property_name\"}"
      
      - name: primary_key_column
        display_name: 主键列
        data_type: string
        required: false
        description: "用于生成实例ID的主键列名"

link_types:
  - name: database_has_table
    display_name: 数据源包含表
    description: "数据源包含数据表"
    source_type: database
    target_type: table
    cardinality: one-to-many
    direction: directed
    property_mappings:
      id: database_id

  - name: table_has_column
    display_name: 表包含列
    description: "数据表包含列"
    source_type: table
    target_type: column
    cardinality: one-to-many
    direction: directed
    property_mappings:
      id: table_id

  - name: mapping_links_table
    display_name: 映射关联表
    description: "映射关系关联到数据表"
    source_type: mapping
    target_type: table
    cardinality: many-to-one
    direction: directed
